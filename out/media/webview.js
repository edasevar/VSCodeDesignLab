(()=>{"use strict";let t,e;const n=acquireVsCodeApi();try{const s=n.getState&&n.getState();s&&s.model&&(t=s.model),s&&s.ui&&(e=s.ui)}catch{}let s,a,o={colors:{},tokenColors:[],semanticTokens:{}};const l=[],i=[];let c,d=0;const r=t=>JSON.parse(JSON.stringify(t)),u=()=>{const t=Date.now();t-d<500||(l.push(r(o)),l.length>50&&l.shift(),i.length=0,d=t,m())},p=()=>{if(!l.length)return;i.push(r(o));const t=l.pop();o=r(t),f(),C(),m()},v=()=>{if(!i.length)return;l.push(r(o));const t=i.pop();o=r(t),f(),C(),m()};function m(){const t=document.getElementById("btn-undo"),e=document.getElementById("btn-redo");t&&(t.disabled=0===l.length),e&&(e.disabled=0===i.length);const n=document.getElementById("status");if(n){const t=JSON.stringify(o)!==(c||"");n.textContent=`${t?"â— ":""}Undo:${l.length} Redo:${i.length}`}}function b(){l.length=0,i.length=0,d=0,c=JSON.stringify(o),m()}let y=[];function f(){!function(){const t=document.getElementById("panel-colors"),e={};t.querySelectorAll("details.category").forEach(t=>{const n=t,s=n.querySelector("summary")?.textContent?.trim()||"";s&&(e[s]=n.open)});const s=t.scrollTop;t.innerHTML=y.map(t=>`\n\t\t\t<details class="category" ${e[t.name]?"open":""}>\n\t\t\t\t<summary><span class="cat-icon">${function(t){const e=(t||"").toLowerCase();return e.includes("editor")?"ğŸ“":e.includes("tab")?"ğŸ“‘":e.includes("status")?"ğŸ“¶":e.includes("panel")?"ğŸ—‚ï¸":e.includes("terminal")?"âŒ¨ï¸":e.includes("debug")||e.includes("problems")?"ğŸ":e.includes("list")||e.includes("explorer")?"ğŸ“‹":e.includes("activity")||e.includes("sidebar")?"ğŸ§­":e.includes("title")?"ğŸ·ï¸":e.includes("git")||e.includes("scm")?"ğŸŒ¿":e.includes("ansi")?"ğŸ¨":e.includes("notification")?"ğŸ””":"ğŸ¯"}(t.name)}</span> ${t.name}</summary>\n\t\t\t\t<div class="cat-list">\n\t\t\t\t\t${t.items.map(t=>function(t,e,n){const s=o.colors[e]||"",a=A(s);let l="";l=e.includes("background")?"ğŸ–¼ï¸":e.includes("foreground")?"ğŸ”¤":e.includes("border")?"â¬›":e.includes("badge")?"ğŸ·ï¸":e.includes("error")?"âŒ":e.includes("warning")?"âš ï¸":e.includes("info")?"â„¹ï¸":e.includes("active")?"â­":e.includes("inactive")?"â¸ï¸":e.includes("focus")?"ğŸ¯":e.includes("selection")?"ğŸ–±ï¸":e.includes("highlight")?"ğŸ’¡":e.includes("tab")?"ğŸ“‘":e.includes("list")?"ğŸ“‹":e.includes("status")?"ğŸ“¶":e.includes("panel")?"ğŸ—‚ï¸":e.includes("terminal")?"âŒ¨ï¸":e.includes("editor")?"ğŸ“":e.includes("action")?"âš¡":e.includes("find")?"ğŸ”":e.includes("notification")?"ğŸ””":e.includes("problems")?"ğŸ":e.includes("title")?"ğŸ·ï¸":"ğŸ¨";const{short:i,full:c,truncated:d}=function(t){const e=(t||"").replace(/\s+/g," ").trim(),n=e.length>160;return{short:n?g(e.slice(0,157))+"...":g(e),full:e,truncated:n}}(n||""),r=`data-full="${g(c)}"`,u=d?'<button class="desc-toggle" type="button" aria-label="Expand description" data-toggle-desc>More</button>':"";return`\n\t\t\t\t<div class="row" id="row-${e}">\n\t\t\t\t\t\t<div class="row-head">\n\t\t\t\t\t\t\t<div class="row-label">${l} ${t}</div>\n\t\t\t\t\t\t\t<button class="locate-btn" type="button" data-locate="${e}" title="Locate in preview">Locate</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row-body">\n\t\t\t\t\t\t\t\t<span class="chip" aria-hidden="true" title="${s.toUpperCase()} (${a}%)"><span class="chip-fill" style="background:${E(s)?k(s):"#000000"}"></span></span>\n\t\t\t\t\t\t\t\t<input type="color" data-key="${e}" value="${h(s)}" aria-label="Color value for ${e}" />\n\t\t\t\t\t\t\t\t<input type="text" data-key="${e}" value="${s}" placeholder="#RRGGBB or #RRGGBBAA" aria-label="Hex color for ${e}" />\n\t\t\t\t\t\t\t\t<input type="range" min="0" max="100" step="1" data-alpha-key="${e}" value="${a}" title="Alpha ${a}%" aria-label="Alpha for ${e}" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="row-desc">\n\t\t\t\t\t\t\t<span class="desc" ${r}>${i}</span> ${u}\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`}(t.key,t.key,t.description||"")).join("")}\n\t\t\t\t</div>\n\t\t\t</details>\n\t\t`).join(""),t.querySelectorAll('input[type="color"], input[type="text"]').forEach(t=>{t.addEventListener("input",S)}),t.querySelectorAll('input[type="range"][data-alpha-key]').forEach(t=>t.addEventListener("input",x)),t.querySelectorAll("button[data-locate]").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.locate;n.postMessage({type:"LOCATE",payload:{elementId:R(e)}})})}),t.scrollTop=s}(),$(),w(),function(){const t=document.getElementById("preview"),e=document.querySelector(".ptab.active")?.dataset.demo||"editor";t.innerHTML='\n\t\t\t <section class="demo" id="demo-editor" style="display:block">\n\t\t\t\t <div class="vsc-frame vsc-frame-preview">\n\t\t\t\t\t <div class="vsc-titlebar">\n\t\t\t\t\t\t VS Code Design Lab â€” Editor Preview\n\t\t\t\t\t\t <button id="btn-save-theme" class="save-theme-btn" title="Save Theme">\n\t\t\t\t\t\t\t <span class="icon">ğŸ’¾</span> Save Theme\n\t\t\t\t\t\t </button>\n\t\t\t\t\t </div>\n\t\t\t\t\t <div class="vsc-main">\n\t\t\t\t\t\t <aside class="vsc-sidebar">\n\t\t\t\t\t\t\t <div class="vsc-sidebar-icon active" title="Explorer">ğŸ“‚</div>\n\t\t\t\t\t\t\t <div class="vsc-sidebar-icon" title="Search">ğŸ”</div>\n\t\t\t\t\t\t\t <div class="vsc-sidebar-icon" title="Source Control">ğŸ”€</div>\n\t\t\t\t\t\t\t <div class="vsc-sidebar-icon" title="Run &amp; Debug">ğŸ</div>\n\t\t\t\t\t\t\t <div class="vsc-sidebar-icon" title="Extensions">ğŸ§©</div>\n\t\t\t\t\t\t </aside>\n\t\t\t\t\t\t <div class="vsc-content">\n\t\t\t\t\t\t\t <div class="vsc-filetree">\n\t\t\t\t\t\t\t\t <div class="filetree-title">EXPLORER</div>\n\t\t\t\t\t\t\t\t <div class="filetree-folder"><span class="filetree-folder-icon">ğŸ“</span> src\n\t\t\t\t\t\t\t\t\t <div class="filetree-file"><span class="filetree-file-icon">ğŸ“„</span> app.ts</div>\n\t\t\t\t\t\t\t\t\t <div class="filetree-file"><span class="filetree-file-icon">ğŸ“„</span> utils.ts</div>\n\t\t\t\t\t\t\t\t\t <div class="filetree-file"><span class="filetree-file-icon">ğŸ“„</span> index.ts</div>\n\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-tab active"><span class="tab-dot" aria-hidden="true"></span><span class="tab-title">app.ts</span><span class="tab-close" aria-hidden="true">Ã—</span></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-tab"><span class="tab-title">utils.ts</span><span class="tab-close" aria-hidden="true">Ã—</span></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-tab"><span class="tab-title">index.ts</span><span class="tab-close" aria-hidden="true">Ã—</span></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-breadcrumbs">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class="crumb">workspace</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class="crumb-sep">â€º</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class="crumb">src</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class="crumb-sep">â€º</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <span class="crumb active">app.ts</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t <div id="editor" class="editor-area">\n\t\t\t\t\t\t\t\t <div class="gutter">1<br>2<br>3<br>4<br>5</div>\n\t\t\t\t\t\t\t\t <div class="code-area">\n\t\t\t\t\t\t\t\t\t <div class="active-line"></div>\n\t\t\t\t\t\t\t\t\t <div class="selection"></div>\n\t\t\t\t\t\t\t\t\t <div class="cursor"></div>\n\t\t\t\t\t\t\t\t\t <pre id="code-sample"><code>\n<span class="tok-0">function</span> <span class="tok-1">demo</span>() { <span class="tok-2">console</span>.<span class="tok-3">log</span>(<span class="tok-4">\'Hello theme\'</span>); }\n\t\t\t\t\t\t\t\t\t </code></pre>\n\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="minimap">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="minimap-track">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="minimap-viewport"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-notification animate-in">ğŸ”” Build completed successfully.</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-panel">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-tabs">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-tab active">PROBLEMS</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-tab">OUTPUT</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-tab">TERMINAL</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-bottom-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-problem-item">src/app.ts(12,5): Missing semicolon.</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t <div class="vsc-problem-item">src/utils.ts(3,10): Unused variable.</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t </div>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t </div>\n\t\t\t\t\t <div class="vsc-statusbar"><span>Ln 12, Col 8</span><span>UTF-8</span><span>LF</span><span>TypeScript</span></div>\n\t\t\t\t </div>\n\t\t\t </section>\n\t<section class="demo" id="demo-panels" style="display:none">\n\t\t<div class="panel-surface">\n\t\t\t<div style="font-weight:600;margin-bottom:6px">Panel Title</div>\n\t\t\t<div>Some content inside a VS Code panel area.</div>\n\t\t</div>\n\t</section>\n\t<section class="demo" id="demo-problems" style="display:none">\n\t\t<div class="problems-list">\n\t\t\t<div style="padding:6px;border-bottom:1px solid var(--vscode-editorWidget-border)">src/app.ts:12:5 Missing semicolon</div>\n\t\t\t<div style="padding:6px;border-bottom:1px solid var(--vscode-editorWidget-border)">src/utils.ts:3:10 Unused variable</div>\n\t\t\t<div style="padding:6px">src/index.ts:1:1 Unexpected any</div>\n\t\t</div>\n\t</section>\n\t<section class="demo" id="demo-terminal" style="display:none">\n\t\t<div class="terminal">PS E:&gt; npm run build<br>webpack 5 compiling... done</div>\n\t</section>\n\t<section class="demo" id="demo-notifications" style="display:none">\n\t\t<div class="notification animate-in">Build completed successfully.</div>\n\t</section>\n\t<section class="demo" id="demo-statusbar" style="display:none">\n\t\t<div class="statusbar"><span>Ln 12, Col 8</span><span>UTF-8</span><span>LF</span><span>TypeScript</span></div>\n\t</section>\n\t<section class="demo" id="demo-lists" style="display:none">\n\t\t\t<div class="list">\n\t\t\t\t<div style="display:flex;border-bottom:1px solid var(--vscode-editorGroupHeader-tabsBorder)">\n\t\t\t\t\t<div style="padding:6px 10px;background:var(--vscode-tab-activeBackground);color:var(--vscode-tab-activeForeground);border-right:1px solid var(--vscode-editorGroupHeader-tabsBorder)">app.ts</div>\n\t\t\t\t\t<div style="padding:6px 10px;background:var(--vscode-tab-inactiveBackground);color:var(--vscode-tab-inactiveForeground);border-right:1px solid var(--vscode-editorGroupHeader-tabsBorder)">utils.ts</div>\n\t\t\t\t\t<div style="padding:6px 10px;background:var(--vscode-tab-inactiveBackground);color:var(--vscode-tab-inactiveForeground)">index.ts</div>\n\t\t\t\t</div>\n\t\t\t\t<div style="padding:8px">Content area under tabs</div>\n\t\t\t</div>\n\t</section>',q(),document.querySelectorAll(".ptab").forEach(t=>t.addEventListener("click",()=>{document.querySelectorAll(".ptab").forEach(t=>t.classList.remove("active")),t.classList.add("active");const e=t.dataset.demo;document.querySelectorAll(".demo").forEach(t=>t.style.display="none"),document.getElementById("demo-"+e).style.display="block",I()})),document.querySelectorAll(".demo").forEach(t=>t.style.display="none");const n=document.getElementById("demo-"+e);n&&(n.style.display="block")}()}function g(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function h(t){return/^#([0-9a-f]{6}|[0-9a-f]{8})$/i.test(t)?`#${t.replace("#","").slice(0,6)}`:"#000000"}function E(t){return/^#[0-9a-f]{6}([0-9a-f]{2})?$/i.test(t.trim())}function k(t){let e=t.trim();return e.startsWith("#")||(e="#"+e),e.toUpperCase()}function S(t){const e=t.target,n=e.dataset.key;let s=e.value.trim();const a=e.parentElement,l=a.querySelector(".chip-fill"),i=a.querySelector('input[type="text"][data-key="'+n+'"]'),c=a.querySelector('input[type="color"][data-key="'+n+'"]'),d=a.querySelector('input[type="range"][data-alpha-key="'+n+'"]');if("color"===e.type){const t=s,e=A(i?.value||""),n=T(t,e);i.value=n,d.value=String(e),s=n}else"text"===e.type&&E(s)&&(c.value=h(s),d.value=String(A(s)),i.classList.remove("invalid"),i.setAttribute("aria-invalid","false"));if(!E(s))return i.classList.add("invalid"),i.setAttribute("aria-invalid","true"),void(l&&(l.style.background="#000000"));i.classList.remove("invalid"),i.setAttribute("aria-invalid","false"),u(),o.colors[n]=k(s),l&&(l.style.background=o.colors[n]),C()}function x(t){const e=t.target,n=e.dataset.alphaKey,s=e.parentElement,a=s.querySelector(".chip-fill"),l=s.querySelector('input[type="color"][data-key="'+n+'"]'),i=s.querySelector('input[type="text"][data-key="'+n+'"]'),c=L(parseInt(e.value,10)),d=T(l.value,c);i.value=d,u(),o.colors[n]=d,a&&(a.style.background=d),C()}function L(t){return isFinite(t)?Math.min(100,Math.max(0,t)):100}function A(t){const e=/^#[0-9a-f]{6}([0-9a-f]{2})$/i.exec(t);if(!e)return 100;const n=parseInt(e[1],16);return Math.round(n/255*100)}function T(t,e){const n=h(t).replace("#",""),s=L(e);return`#${n}${Math.round(s/100*255).toString(16).padStart(2,"0")}`}function $(){const t=document.getElementById("panel-tokens"),e=t.scrollTop,s=new Set;t.querySelectorAll(".row").forEach((t,e)=>{const n=t.querySelector("[data-toggle-adv]");n&&"true"===n.getAttribute("aria-expanded")&&s.add(e)});const a=o.tokenColors.map((t,e)=>function(t,e){const n=(t.settings.fontStyle||"").split(/\s+/).filter(Boolean),s=t=>n.includes(t);return`<div class="row">\n\t\t\t<div class="row-head">\n\t\t\t\t<div class="row-label">ğŸ¯ Token Rule ${e+1}</div>\n\t\t\t\t<button class="locate-btn" type="button" title="Locate editor preview">Locate</button>\n\t\t\t</div>\n\t\t\t<div class="row-body">\n\t\t\t\t<label>scope</label><input data-token-edit aria-label="Token scope" data-index="${e}" data-field="scope" value="${Array.isArray(t.scope)?t.scope.join(", "):t.scope||""}" />\n\t\t\t\t<label>foreground</label>\n\t\t\t\t<span class="chip" aria-hidden="true"><span class="chip-fill" style="background:${E(t.settings.foreground||"")?k(t.settings.foreground):"#000000"}"></span></span>\n\t\t\t\t<input data-token-edit aria-label="Token foreground color" data-index="${e}" data-field="fg" value="${t.settings.foreground||""}" />\n\t\t\t</div>\n\t\t\t<div class="row-desc">\n\t\t\t\t<button class="desc-toggle" type="button" data-toggle-adv aria-expanded="false">Advanced</button>\n\t\t\t\t<div class="advanced collapsed">\n\t\t\t\t\t<fieldset style="display:inline-flex;gap:6px;border:none;padding:0;margin:0">\n\t\t\t\t\t\t<label><input type="checkbox" data-fs data-index="${e}" value="bold" ${s("bold")?"checked":""}/> bold</label>\n\t\t\t\t\t\t<label><input type="checkbox" data-fs data-index="${e}" value="italic" ${s("italic")?"checked":""}/> italic</label>\n\t\t\t\t\t\t<label><input type="checkbox" data-fs data-index="${e}" value="underline" ${s("underline")?"checked":""}/> underline</label>\n\t\t\t\t\t\t<label><input type="checkbox" data-fs data-index="${e}" value="strikethrough" ${s("strikethrough")?"checked":""}/> strikethrough</label>\n\t\t\t\t\t</fieldset>\n\t\t\t\t\t<button data-token-remove data-index="${e}" aria-label="Remove token rule ${e+1}">Remove</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`}(t,e)).join("");t.innerHTML=`\n\t\t<button id="add-token" aria-label="Add token rule">Add Rule</button>\n\t\t<div>${a}</div>`,document.getElementById("add-token").addEventListener("click",()=>{u(),o.tokenColors.push({scope:"",settings:{}}),$(),C()}),t.querySelectorAll("[data-token-edit]").forEach(t=>t.addEventListener("input",t=>{const e=t.target,n=Number(e.dataset.index),s=e.dataset.field;if(u(),"scope"===s&&(o.tokenColors[n].scope=e.value),"fg"===s){const t=e.value.trim();if(!E(t))return e.classList.add("invalid"),void e.setAttribute("aria-invalid","true");e.classList.remove("invalid"),e.setAttribute("aria-invalid","false"),o.tokenColors[n].settings.foreground=k(t)}"fs"===s&&(o.tokenColors[n].settings.fontStyle=e.value),C()})),t.querySelectorAll("[data-token-remove]").forEach(t=>t.addEventListener("click",t=>{const e=Number(t.currentTarget.dataset.index);u(),o.tokenColors.splice(e,1),$(),C()})),t.querySelectorAll("[data-fs]").forEach(t=>t.addEventListener("change",t=>{const e=t.target,n=Number(e.dataset.index),s=e.value,a=(o.tokenColors[n].settings.fontStyle||"").split(/\s+/).filter(Boolean),l=new Set(a);u(),e.checked?l.add(s):l.delete(s),o.tokenColors[n].settings.fontStyle=Array.from(l).join(" ")||void 0,C()})),t.querySelectorAll(".locate-btn").forEach(t=>t.addEventListener("click",()=>{n.postMessage({type:"LOCATE",payload:{elementId:"demo-editor"}})})),t.querySelectorAll("[data-toggle-adv]").forEach(t=>t.addEventListener("click",e=>{e.preventDefault();const n=t,s=n.closest(".row");if(!s)return;const a=s.querySelector(".advanced");a&&("true"===n.getAttribute("aria-expanded")?(a.classList.add("collapsed"),n.textContent="Advanced",n.setAttribute("aria-expanded","false")):(a.classList.remove("collapsed"),n.textContent="Less",n.setAttribute("aria-expanded","true")))})),t.querySelectorAll(".row").forEach((t,e)=>{if(!s.has(e))return;const n=t.querySelector(".advanced"),a=t.querySelector("[data-toggle-adv]");n&&a&&(n.classList.remove("collapsed"),a.textContent="Less",a.setAttribute("aria-expanded","true"))}),t.scrollTop=e}function w(){const t=document.getElementById("panel-semantic"),e=t.scrollTop,s=new Set;t.querySelectorAll(".row").forEach((t,e)=>{const n=t.querySelector("[data-toggle-adv]");n&&"true"===n.getAttribute("aria-expanded")&&s.add(e)});const a=Object.entries(o.semanticTokens);t.innerHTML=`\n\t\t<button id="add-sem" aria-label="Add semantic rule">Add Semantic</button>\n\t<div>${a.map(([t,e],n)=>function(t,e,n){const s=(e.fontStyle||"").split(/\s+/).filter(Boolean),a=t=>s.includes(t);return`<div class="row">\n\t\t\t<div class="row-head">\n\t\t\t\t<div class="row-label">ğŸ§  Semantic ${n+1}</div>\n\t\t\t\t<button class="locate-btn" type="button" title="Locate editor preview">Locate</button>\n\t\t\t</div>\n\t\t\t<div class="row-body">\n\t\t\t\t<label>selector</label><input data-sem aria-label="Semantic selector" data-index="${n}" data-field="selector" value="${t}"/>\n\t\t\t\t<label>foreground</label>\n\t\t\t\t<span class="chip" aria-hidden="true"><span class="chip-fill" style="background:${E(e.foreground||"")?k(e.foreground):"#000000"}"></span></span>\n\t\t\t\t<input data-sem aria-label="Semantic foreground color" data-index="${n}" data-field="fg" value="${e.foreground||""}"/>\n\t\t\t</div>\n\t\t\t<div class="row-desc">\n\t\t\t\t<button class="desc-toggle" type="button" data-toggle-adv aria-expanded="false">Advanced</button>\n\t\t\t\t<div class="advanced collapsed">\n\t\t\t\t\t<fieldset style="display:inline-flex;gap:6px;border:none;padding:0;margin:0">\n\t\t\t\t\t\t<label><input type="checkbox" data-sem-fs data-index="${n}" value="bold" ${a("bold")?"checked":""}/> bold</label>\n\t\t\t\t\t\t<label><input type="checkbox" data-sem-fs data-index="${n}" value="italic" ${a("italic")?"checked":""}/> italic</label>\n\t\t\t\t\t\t<label><input type="checkbox" data-sem-fs data-index="${n}" value="underline" ${a("underline")?"checked":""}/> underline</label>\n\t\t\t\t\t</fieldset>\n\t\t\t\t\t<button data-sem-remove data-index="${n}" aria-label="Remove semantic rule ${n+1}">Remove</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`}(t,e,n)).join("")}</div>`,document.getElementById("add-sem").addEventListener("click",()=>{u(),o.semanticTokens["entity.name.new"]={},w(),C()}),t.querySelectorAll("[data-sem]").forEach(t=>t.addEventListener("input",t=>{const e=t.target,n=Number(e.dataset.index),s=Object.keys(o.semanticTokens)[n];if(u(),"selector"===e.dataset.field){const t=e.value,n=o.semanticTokens[s];delete o.semanticTokens[s],o.semanticTokens[t]=n}else if("fg"===e.dataset.field){const t=e.value.trim(),n=e.previousElementSibling&&e.previousElementSibling.classList.contains("chip")?e.previousElementSibling.querySelector(".chip-fill"):null;if(!E(t))return e.classList.add("invalid"),e.setAttribute("aria-invalid","true"),void(n&&(n.style.background="#000000"));e.classList.remove("invalid"),e.setAttribute("aria-invalid","false"),o.semanticTokens[s].foreground=k(t),n&&(n.style.background=o.semanticTokens[s].foreground)}else"fs"===e.dataset.field&&(o.semanticTokens[s].fontStyle=e.value);C()})),t.querySelectorAll("[data-sem-remove]").forEach(t=>t.addEventListener("click",t=>{const e=Number(t.currentTarget.dataset.index),n=Object.keys(o.semanticTokens)[e];u(),delete o.semanticTokens[n],w(),C()})),t.querySelectorAll("[data-sem-fs]").forEach(t=>t.addEventListener("change",t=>{const e=t.target,n=Number(e.dataset.index),s=Object.keys(o.semanticTokens)[n],a=(o.semanticTokens[s].fontStyle||"").split(/\s+/).filter(Boolean),l=new Set(a);u(),e.checked?l.add(e.value):l.delete(e.value),o.semanticTokens[s].fontStyle=Array.from(l).join(" ")||void 0,C()})),t.querySelectorAll(".locate-btn").forEach(t=>t.addEventListener("click",()=>{n.postMessage({type:"LOCATE",payload:{elementId:"demo-editor"}})})),t.querySelectorAll("[data-toggle-adv]").forEach(t=>t.addEventListener("click",e=>{e.preventDefault();const n=t,s=n.closest(".row");if(!s)return;const a=s.querySelector(".advanced");a&&("true"===n.getAttribute("aria-expanded")?(a.classList.add("collapsed"),n.textContent="Advanced",n.setAttribute("aria-expanded","false")):(a.classList.remove("collapsed"),n.textContent="Less",n.setAttribute("aria-expanded","true")))})),t.querySelectorAll(".row").forEach((t,e)=>{if(!s.has(e))return;const n=t.querySelector(".advanced"),a=t.querySelector("[data-toggle-adv]");n&&a&&(n.classList.remove("collapsed"),a.textContent="Less",a.setAttribute("aria-expanded","true"))}),t.scrollTop=e}function C(){s&&window.clearTimeout(s),s=window.setTimeout(()=>{const t=JSON.stringify(o);if(t!==a){a=t,n.postMessage({type:"APPLY_PREVIEW",payload:o});try{n.setState&&n.setState({model:o,ui:B()})}catch{}q()}},120)}function q(){const t="token-style";let e=document.getElementById(t);e||(e=document.createElement("style"),e.id=t,document.head.appendChild(e));const n=o.tokenColors.filter(t=>t.settings&&t.settings.foreground).map((t,e)=>`#code-sample .tok-${e}{color:${t.settings.foreground};}`).join("\n");e.textContent=n}function B(){const t=document.querySelector(".tab.active"),e=t?.dataset.tab||"colors",n=document.querySelector(".ptab.active"),s=n?.dataset.demo||"editor",a=document.getElementById("search")?.value||"",o={};document.querySelectorAll("#panel-colors details.category").forEach(t=>{const e=t,n=e.querySelector("summary")?.textContent?.trim()||"";n&&(o[n]=e.open)});const l=document.getElementById("panel-colors")?.scrollTop||0;return{leftTab:e,previewTab:s,search:a,openCats:o,leftScroll:l}}function I(){try{n.setState&&n.setState({model:o,ui:B()})}catch{}}function R(t){return t.startsWith("statusBar")?"demo-statusbar":t.startsWith("panel")||t.startsWith("panelSection")?"demo-panels":t.startsWith("terminal")?"demo-terminal":t.startsWith("problems")?"demo-problems":t.startsWith("tab.")||t.startsWith("editorGroupHeader")?"demo-lists":"demo-editor"}function M(t){return Array.isArray(t)?t.map(t=>t.trim()).join(","):String(t||"").trim()}window.addEventListener("message",n=>{const{type:s,payload:a}=n.data;if("BOOT"===s){y=a.categories||[];const n=a.settings||{};if(t?o=r(t):(o.colors=n.colors||{},o.tokenColors=n.tokenColors?.textMateRules||[],o.semanticTokens=n.semanticTokens?.rules||{}),f(),b(),e){const t=e.leftTab||"colors";document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active")),document.querySelector(`[data-tab="${t}"]`)?.classList.add("active"),document.querySelectorAll(".panel").forEach(t=>t.classList.remove("active")),document.getElementById("panel-"+t)?.classList.add("active");const n=e.previewTab||"editor";if(document.querySelectorAll(".ptab").forEach(t=>t.classList.remove("active")),document.querySelector(`[data-demo="${n}"]`)?.classList.add("active"),document.querySelectorAll(".demo").forEach(t=>t.style.display="none"),document.getElementById("demo-"+n).style.display="block","string"==typeof e.search){const t=document.getElementById("search");t.value=e.search;const n=new Event("input");t.dispatchEvent(n)}if(e.openCats&&document.querySelectorAll("#panel-colors details.category").forEach(t=>{const n=t,s=n.querySelector("summary")?.textContent?.trim()||"";s&&void 0!==e.openCats[s]&&(n.open=!!e.openCats[s])}),"number"==typeof e.leftScroll){const t=document.getElementById("panel-colors");t&&(t.scrollTop=e.leftScroll)}}}if("LOAD_CURRENT"===s){o.colors=(i=a.colors||{},c=o.colors,{...c,...i});const t=(l=a.tokenColors,Array.isArray(l)?l:l&&Array.isArray(l.textMateRules)?l.textMateRules:[]);o.tokenColors=function(t,e){const n=new Map;for(const e of t)n.set(M(e.scope),e);for(const t of e){const e=M(t.scope);n.has(e)||n.set(e,t)}return Array.from(n.values())}(t,o.tokenColors);const e=function(t){if(t&&"object"==typeof t&&!Array.isArray(t)){if(t.rules&&"object"==typeof t.rules)return t.rules;const{enabled:e,...n}=t;return n&&Object.keys(n).length?n:{}}return{}}(a.semanticTokens);o.semanticTokens=function(t,e){return{...e,...t}}(e,o.semanticTokens),f(),b(),C()}var l,i,c;"LOAD_IMPORTED"===s&&(o.colors=a.colors||{},o.tokenColors=a.tokenColors||[],o.semanticTokens=a.semanticTokens||{},f(),b(),C()),"LOCATE"===s&&function(t){if(!t)return;const e=document.getElementById(t);if(e&&(e.classList.add("locate-pulse"),setTimeout(()=>e.classList.remove("locate-pulse"),1e3)),t.startsWith("demo-"));else if(t.startsWith("row-")){const e=document.getElementById(t);e&&(e.classList.add("locate-pulse"),e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>e.classList.remove("locate-pulse"),1e3))}}(a?.elementId),"UI_UNDO"===s&&p(),"UI_REDO"===s&&v()}),document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("click",t=>{t.target.closest("#btn-save-theme")&&n.postMessage({type:"REQUEST_SAVE_THEME",payload:o})});const t=t=>document.getElementById(t);t("btn-import")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_IMPORT"})),t("btn-use")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_USE_CURRENT"})),t("btn-blank")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_START_BLANK"})),t("btn-undo")?.addEventListener("click",()=>{p()}),t("btn-redo")?.addEventListener("click",()=>{v()}),t("btn-export-json")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_EXPORT_JSON"})),t("btn-export-css")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_EXPORT_CSS"})),t("btn-export-vsix")?.addEventListener("click",()=>n.postMessage({type:"REQUEST_EXPORT_VSIX"})),document.addEventListener("click",t=>{const e=t.target.closest("[data-toggle-desc]");if(!e)return;t.preventDefault();const n=e,s=n.closest(".row");if(!s)return;const a=s.querySelector(".desc");if(!a)return;const o=a.getAttribute("data-full")||"";"true"===n.getAttribute("aria-expanded")?(a.textContent=function(t){if(!t)return"";const e=t.replace(/\s+/g," ").trim();return e.length>140?g(e.slice(0,137))+"...":g(e)}(o),n.textContent="More",n.setAttribute("aria-expanded","false")):(a.textContent=o,n.textContent="Less",n.setAttribute("aria-expanded","true"))}),document.querySelectorAll(".tab").forEach(t=>t.addEventListener("click",()=>{document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active")),t.classList.add("active");const e=t.dataset.tab;document.querySelectorAll(".panel").forEach(t=>t.classList.remove("active")),document.getElementById("panel-"+e).classList.add("active"),I()})),document.addEventListener("toggle",t=>{const e=t.target;e&&e.matches&&e.matches("details.category")&&I()},!0);const e=document.getElementById("panel-colors");e&&e.addEventListener("scroll",()=>{window.requestAnimationFrame(()=>I())});const s=document.getElementById("search");s.addEventListener("input",()=>{const t=s.value.toLowerCase();document.querySelectorAll("#panel-colors details.category").forEach(e=>{let n=!1;e.querySelectorAll(".row").forEach(e=>{const s=(e.textContent?.toLowerCase()||"").includes(t);e.style.display=s?"":"none",s&&(n=!0)}),e.style.display=n||""===t?"":"none",t&&(e.open=n)}),document.querySelectorAll("#panel-tokens .row").forEach(e=>{const n=e.textContent?.toLowerCase()||"";e.style.display=n.includes(t)?"":"none"}),document.querySelectorAll("#panel-semantic .row").forEach(e=>{const n=e.textContent?.toLowerCase()||"";e.style.display=n.includes(t)?"":"none"}),I()});const a=document.getElementById("clear-search");a&&a.addEventListener("click",()=>{s.value="";const t=new Event("input");s.dispatchEvent(t),I()}),window.addEventListener("keydown",t=>{if(!t.ctrlKey&&!t.metaKey)return;const e=t.key.toLowerCase();"z"===e?(t.preventDefault(),t.shiftKey?v():p()):"y"===e&&(t.preventDefault(),v())}),m(),n.postMessage({type:"REQUEST_BOOT"})})})();
//# sourceMappingURL=webview.js.map